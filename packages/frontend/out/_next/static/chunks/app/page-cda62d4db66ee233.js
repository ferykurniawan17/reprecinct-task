(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3844:function(e,t,a){Promise.resolve().then(a.bind(a,7917))},7917:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var s=a(7573),r=a(1988);let l=async e=>{let{limit:t,search:a=""}=e,s="".concat("http://localhost:4000","/api/attribute?limit=").concat(t,"&search=").concat(a),r=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Failed to fetch attributes: ".concat(r.statusText));return await r.json()};var i=e=>(0,r.a)({queryKey:["attributes",e],queryFn:()=>l(e),refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:!1}),n=e=>{let{tableQueries:t}=e,{data:a,isFetching:s,refetch:r}=i(t);return{data:a,isFetching:s,refetch:r}},c=a(1695),d=a(7653),o=a(607),m=a(5579);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,m.m6)((0,o.W)(t))}var h=a(8828);let x=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"table";return(0,s.jsx)("div",{className:"relative w-full overflow-auto rounded-md border border-gray-200 shadow-sm",children:(0,s.jsx)(i,{ref:t,className:u("w-full caption-bottom text-sm border-collapse",a),...l})})});x.displayName="Table";let f=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"thead";return(0,s.jsx)(i,{ref:t,className:u("[&_tr]:border-b [&_tr]:border-gray-200 bg-gray-50/50",a),...l})});f.displayName="TableHeader";let p=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"tbody";return(0,s.jsx)(i,{ref:t,className:u("[&_tr:last-child]:border-0",a),...l})});p.displayName="TableBody",d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"tfoot";return(0,s.jsx)(i,{ref:t,className:u("border-t border-gray-200 bg-gray-50/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let b=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"tr";return(0,s.jsx)(i,{ref:t,className:u("border-b border-gray-200 transition-colors hover:bg-gray-50/50 data-[state=selected]:bg-gray-100",a),...l})});b.displayName="TableRow";let g=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"th";return(0,s.jsx)(i,{ref:t,className:u("h-12 px-4 text-left align-middle font-semibold text-gray-900 [&:has([role=checkbox])]:pr-0 first:pl-6 last:pr-6",a),...l})});g.displayName="TableHead";let j=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"td";return(0,s.jsx)(i,{ref:t,className:u("p-4 align-middle text-gray-700 [&:has([role=checkbox])]:pr-0 first:pl-6 last:pr-6",a),...l})});j.displayName="TableCell",d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"caption";return(0,s.jsx)(i,{ref:t,className:u("mt-4 text-sm text-gray-600",a),...l})}).displayName="TableCaption";var y=e=>{let{attributes:t,isLoading:a=!1,searchQuery:r=""}=e;return a?(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)(x,{children:[(0,s.jsx)(f,{children:(0,s.jsx)(b,{children:(0,s.jsx)(g,{children:"Name"})})}),(0,s.jsx)(p,{children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(b,{children:(0,s.jsx)(j,{children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})})},t))})]})})}):t&&0!==t.length?(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)(x,{children:[(0,s.jsx)(f,{children:(0,s.jsx)(b,{children:(0,s.jsx)(g,{children:"Name"})})}),(0,s.jsx)(p,{children:t.map((e,t)=>(0,s.jsx)(b,{children:(0,s.jsx)(j,{className:"font-medium",children:e.name})},t))})]})})}):(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)(x,{children:[(0,s.jsx)(f,{children:(0,s.jsx)(b,{children:(0,s.jsx)(g,{children:"Name"})})}),(0,s.jsx)(p,{children:(0,s.jsx)(b,{children:(0,s.jsx)(j,{colSpan:1,className:"text-center py-8 text-gray-500",children:r?'No attributes found matching "'.concat(r,'"'):"No attributes found"})})})]})})})};let N=d.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,i=r?h.g7:"button";return(0,s.jsx)(i,{className:u("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium h-10 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transition-colors",a),ref:t,...l})});N.displayName="Button";var w=a(7930),v=a(5969);let S=async e=>{let t=await fetch("".concat("http://localhost:4000","/api/attribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create attributes: ".concat(t.statusText));return await t.json()};var R=()=>{let e=(0,w.NL)();return(0,v.D)({mutationFn:e=>S(e),onSuccess:()=>{e.invalidateQueries({queryKey:["attributes"]})},onError:e=>{console.error("Error creating attributes:",e)}})},C=a(9198);let T=/^[a-zA-Z0-9 ']+$/,_=/[^a-zA-Z0-9 ']/g,k=e=>T.test(e),E=e=>e.trim().replace(_,""),A=e=>{let t=E(e);return t?k(t)?{isValid:!0,sanitized:t}:{isValid:!1,sanitized:t,error:"Invalid characters detected. Only letters, numbers, regular spaces, and single quotes are allowed. No special characters, double quotes, tabs, newlines, emojis, or control characters permitted."}:{isValid:!1,sanitized:t,error:"Empty string"}};var P=()=>{var e;let[t,a]=(0,d.useState)(""),[r,l]=(0,d.useState)([]),i=R(),{data:c}=n({tableQueries:{limit:1e3}}),o=(null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.map(e=>e.name.toLowerCase()))||[],m=e=>{let t=[],a=e.split(/[,;\n]/).map(e=>e.trim()).filter(e=>""!==e);if(0===a.length)return{valid:!1,errors:[],validAttributes:[]};let s=[],r=new Set;for(let e of a){let{isValid:a,sanitized:l,error:i}=A(e);if(!a){t.push('"'.concat(e,'" → ').concat(i));continue}let n=l.toLowerCase();if(r.has(n)){t.push('"'.concat(l,'" is duplicated in your input.'));continue}if(o.includes(n)){t.push('"'.concat(l,'" already exists.'));continue}r.add(n),s.push(l)}return{valid:s.length>0,errors:t,validAttributes:s}},u=t.trim()?m(t):null;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create New Attributes"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=m(t);l(s.errors),s.valid&&i.mutate({attributes:s.validAttributes},{onSuccess:()=>{a(""),l([])}})},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"attributes",className:"text-sm font-medium text-gray-700",children:"Attributes"}),(0,s.jsx)(C.K,{id:"attributes",placeholder:"Enter attribute names separated by commas, semicolons, or new lines Example: Color, Size, Weight",value:t,onChange:e=>{a(e.target.value),r.length>0&&l([])},size:"3",variant:"surface",resize:"vertical",style:{minHeight:"100px"}}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Separate multiple attributes with commas (,), semicolons (;), or new lines. Only letters, numbers, regular spaces, and single quotes are allowed. Special characters, double quotes, tabs, emojis, and control characters are not permitted."}),u&&t.trim()&&!r.length&&(0,s.jsxs)("div",{className:"text-xs",children:[u.validAttributes.length>0&&(0,s.jsxs)("p",{className:"text-green-600",children:["✓ ",u.validAttributes.length," valid attribute(s) ready to create"]}),u.errors.length>0&&(0,s.jsx)("div",{className:"space-y-1",children:u.errors.map((e,t)=>(0,s.jsxs)("p",{className:"text-orange-600",children:["⚠ ",e]},t))})]}),r.length>0&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-red-600",children:"Please fix the following issues:"}),r.map((e,t)=>(0,s.jsxs)("p",{className:"text-xs text-red-600",children:["• ",e]},t))]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,s.jsx)(N,{type:"submit",disabled:i.isPending||""===t.trim()||r.length>0,children:i.isPending?"Creating...":"Create Attributes"}),i.isError&&(0,s.jsx)("span",{className:"text-sm text-red-600",children:"Error creating attributes. Please try again."}),i.isSuccess&&(0,s.jsx)("span",{className:"text-sm text-green-600",children:"Attributes created successfully!"})]})]})]})};let Z=d.forwardRef((e,t)=>{let{className:a,type:r,asChild:l=!1,...i}=e,n=l?h.g7:"input";return(0,s.jsx)(n,{type:r,className:u("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50",a),ref:t,...i})});Z.displayName="Input";var z=a(5731),F=a(269),O=e=>{let{placeholder:t="Search attributes...",className:a="",debounceMs:r=300}=e,l=(0,c.useRouter)(),i=(0,c.usePathname)(),n=(0,c.useSearchParams)(),[o,m]=(0,d.useState)(n.get("search")||"");(0,d.useEffect)(()=>{m(n.get("search")||"")},[n]);let u=(0,d.useCallback)(e=>{let t=new URLSearchParams(n);e.trim()?t.set("search",e.trim()):t.delete("search"),t.delete("page"),l.push("".concat(i,"?").concat(t.toString()))},[l,i,n]),h=(0,d.useCallback)(e=>{let t=setTimeout(()=>{u(e)},r);return()=>clearTimeout(t)},[r,u]);return(0,d.useEffect)(()=>h(o),[o,h]),(0,s.jsx)("div",{className:"relative ".concat(a),children:(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),u(o)},className:"relative",children:(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)(z.Z,{className:"absolute left-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(Z,{type:"text",placeholder:t,value:o,onChange:e=>{m(e.target.value)},className:"pl-10 pr-10"}),o&&(0,s.jsx)("button",{type:"button",onClick:()=>{m(""),u("")},className:"absolute right-3 p-1 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,s.jsx)(F.Z,{className:"h-4 w-4"})})]})})})},q=a(1611),L=a(8983),V=a(4965),Q=a(7354);let B=q.fC;q.ZA;let D=q.B4,G=d.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(q.xz,{ref:t,className:u("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(q.JO,{asChild:!0,children:(0,s.jsx)(L.Z,{className:"h-4 w-4 opacity-50"})})]})});G.displayName=q.xz.displayName;let H=d.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(q.u_,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(V.Z,{className:"h-4 w-4"})})});H.displayName=q.u_.displayName;let K=d.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(q.$G,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(L.Z,{className:"h-4 w-4"})})});K.displayName=q.$G.displayName;let U=d.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...i}=e;return(0,s.jsx)(q.h_,{children:(0,s.jsxs)(q.VY,{ref:t,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,s.jsx)(H,{}),(0,s.jsx)(q.l_,{className:u("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(K,{})]})})});U.displayName=q.VY.displayName,d.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(q.__,{ref:t,className:u("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=q.__.displayName;let W=d.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(q.ck,{ref:t,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(q.wU,{children:(0,s.jsx)(Q.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(q.eT,{children:r})]})});W.displayName=q.ck.displayName,d.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(q.Z0,{ref:t,className:u("-mx-1 my-1 h-px bg-gray-200",a),...r})}).displayName=q.Z0.displayName;let $=[{value:"5",label:"5 per page"},{value:"10",label:"10 per page"},{value:"25",label:"25 per page"},{value:"50",label:"50 per page"},{value:"100",label:"100 per page"}];var I=e=>{let{className:t=""}=e,a=(0,c.useRouter)(),r=(0,c.usePathname)(),l=(0,c.useSearchParams)(),i=l.get("limit")||"10";return(0,s.jsxs)("div",{className:"flex items-center space-x-2 ".concat(t),children:[(0,s.jsx)("label",{htmlFor:"limit-select",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Show:"}),(0,s.jsxs)(B,{value:i,onValueChange:e=>{let t=new URLSearchParams(l);e&&"10"!==e?t.set("limit",e):t.delete("limit"),t.delete("page"),a.push("".concat(r,"?").concat(t.toString()))},children:[(0,s.jsx)(G,{id:"limit-select",className:"w-32",children:(0,s.jsx)(D,{placeholder:"Select limit"})}),(0,s.jsx)(U,{children:$.map(e=>(0,s.jsx)(W,{value:e.value,children:e.label},e.value))})]})]})},J=()=>{let e=(0,c.useSearchParams)(),{data:t,isFetching:a}=n({tableQueries:{limit:e.get("limit")?Number(e.get("limit")):10,search:e.get("search")||""}});return(0,s.jsx)("div",{className:"flex flex-col min-h-screen bg-gray-100",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsx)(P,{}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Search & Filter"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,s.jsx)(O,{placeholder:"Search attributes by name...",className:"flex-1 max-w-md"}),(0,s.jsx)(I,{className:"flex-shrink-0"})]})]}),(0,s.jsx)(y,{attributes:(null==t?void 0:t.data)||[],isLoading:a,searchQuery:e.get("search")||""}),(null==t?void 0:t.total)!==void 0&&(0,s.jsx)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:(0,s.jsx)("span",{children:e.get("search")?"Found ".concat(t.total," attribute").concat(1!==t.total?"s":"",' matching "').concat(e.get("search"),'"'):"Total: ".concat(t.total," attributes")})})]})})})};function Y(){return(0,s.jsx)(d.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(J,{})})}}},function(e){e.O(0,[183,417,293,528,744],function(){return e(e.s=3844)}),_N_E=e.O()}]);